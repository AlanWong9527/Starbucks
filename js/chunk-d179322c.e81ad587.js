(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d179322c"],{"07b8":function(t,e,s){t.exports=s.p+"img/starbucks.85375e58.png"},"0fdf":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login"},[a("van-nav-bar",{attrs:{"left-text":"返回","right-text":"首页"},on:{"click-right":function(e){return t.goState("Home")}},scopedSlots:t._u([{key:"left",fn:function(){return[a("div",{staticClass:"nav-left"},[a("div",{staticClass:"logo"},[a("img",{staticClass:"auto-img",attrs:{src:s("07b8"),alt:""}})]),a("div",{staticClass:"logo-text"},[t._v("STARBUCKS")])])]},proxy:!0}])}),a("div",{staticClass:"user-box"},[t._m(0),a("van-form",{directives:[{name:"show",rawName:"v-show",value:!t.isNext,expression:"!isNext"}]},[a("van-field",{attrs:{name:"邮箱",label:"邮箱",placeholder:"请输入邮箱",autocomplete:"off"},model:{value:t.userInfo.email,callback:function(e){t.$set(t.userInfo,"email",e)},expression:"userInfo.email"}}),a("van-field",{attrs:{name:"验证码",label:"验证码",placeholder:"验证码(6个字符)",autocomplete:"off",maxlength:"6"},scopedSlots:t._u([{key:"button",fn:function(){return[a("van-button",{attrs:{size:"small",color:"#01643d",disabled:t.isSend},on:{click:t.getValidCode}},[t._v(t._s(t.text))])]},proxy:!0}]),model:{value:t.userInfo.code,callback:function(e){t.$set(t.userInfo,"code",e)},expression:"userInfo.code"}}),a("div",{staticClass:"forgot"},[a("span",{on:{click:function(e){return t.goState("Login")}}},[t._v("已有账号，立即登录")])]),a("div",{staticClass:"commit-btn"},[a("van-button",{attrs:{round:"",block:"",color:"#01643d"},on:{click:t.next}},[t._v(" 下一步 ")])],1)],1),a("van-form",{directives:[{name:"show",rawName:"v-show",value:t.isNext,expression:"isNext"}]},[a("van-field",{attrs:{name:"手机号",label:"手机号",placeholder:"手机号",autocomplete:"off"},model:{value:t.userInfo.phone,callback:function(e){t.$set(t.userInfo,"phone",e)},expression:"userInfo.phone"}}),a("van-field",{attrs:{type:t.isRegisterPassword?"password":"text",name:"密码",label:"密码",placeholder:"密码必须为字母开头","right-icon":t.isRegisterPassword?"closed-eye":"eye-o",autocomplete:"off"},on:{"click-right-icon":t.toggleRegsiterPasswordType},model:{value:t.userInfo.password,callback:function(e){t.$set(t.userInfo,"password",e)},expression:"userInfo.password"}}),a("div",{staticClass:"forgot"},[a("span",{on:{click:function(e){return t.goState("Login")}}},[t._v("已有账号，立即登录")])]),a("div",{staticClass:"commit-btn"},[a("van-button",{attrs:{round:"",block:"",color:"#01643d"},on:{click:t.commit}},[t._v(" 提交 ")])],1),a("div",{staticClass:"commit-btn"},[a("van-button",{attrs:{round:"",block:"",type:"default"},on:{click:function(e){return t.back()}}},[t._v(" 返回 ")])],1)],1)],1)],1)},o=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"user-title"},[s("div",{staticClass:"welcome"},[t._v("找回密码!")]),s("div",{staticClass:"sub-title"},[t._v("Find password")])])}],n=(s("c25d"),s("e3a8")),i={name:"Login",data:function(){return{userInfo:{phone:"",password:"",email:"",code:""},isRegisterPassword:!0,isNext:!1,isSend:!1,text:"发送验证码"}},methods:{back:function(){this.isNext=!1},toggleRegisterBox:function(){this.isShow=!0},toggleRegsiterPasswordType:function(){this.isRegisterPassword=!this.isRegisterPassword},next:function(){var t=this,e={email:{value:this.userInfo.email,errorMsg:"邮箱格式不正确",reg:/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/},code:{value:this.userInfo.code,errorMsg:"验证码格式不正确",reg:/^[A-Za-z\d]{6}$/}},s=n["a"].valid(e);s&&(this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"POST",url:"/checkValidCode",data:{appkey:this.appkey,validCode:this.userInfo.code}}).then((function(e){t.$toast.clear(),t.$toast(e.data.msg),"K001"==e.data.code&&(t.isNext=!0)})).catch((function(e){t.$toast.clear()})))},goState:function(t){this.$router.push({name:t})},getValidCode:function(){var t=this,e={email:{value:this.userInfo.email,errorMsg:"邮箱格式不正确",reg:/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/}},s=n["a"].valid(e);if(s){var a=60;this.isSend=!0,this.text="".concat(a,"秒后重新发送");var o=setInterval((function(){a<=0?(clearInterval(o),o=null,a=60,t.isSend=!1):(a--,t.text="".concat(a,"秒后重新发送")),0==a&&(t.text="重新发送")}),1e3);this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"POST",url:"/emailValidCode",data:{appkey:this.appkey,email:this.userInfo.email}}).then((function(e){t.$toast.clear(),t.$toast(e.data.msg)})).catch((function(e){t.$toast.clear()}))}},commit:function(){var t=this,e={phone:{value:this.userInfo.phone,errorMsg:"手机号格式不正确",reg:/^1[3-9]\d{9}$/},password:{value:this.userInfo.password,errorMsg:"新密码由数字字母下划线组合(6-16字符)",reg:/^[A-Za-z]\w{5,15}$/}},s=n["a"].valid(e);s&&(this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"POST",url:"/retrievePassword",data:{appkey:this.appkey,phone:this.userInfo.phone,password:this.userInfo.password}}).then((function(e){t.$toast.clear(),t.$toast(e.data.msg),"L001"==e.data.code&&setTimeout((function(){t.goState("Login")}),800)})).catch((function(e){t.$toast.clear()})))}}},r=i,c=s("2877"),l=Object(c["a"])(r,a,o,!1,null,null,null);e["default"]=l.exports},c25d:function(t,e,s){},e3a8:function(t,e,s){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var s=0;s<e.length;s++){var a=e[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function n(t,e,s){return e&&o(t.prototype,e),s&&o(t,s),t}s.d(e,"a",(function(){return l}));s("e7e5");var i=s("d399"),r=s("2b0e");r["a"].use(i["a"]);var c=function(){function t(){a(this,t)}return n(t,[{key:"valid",value:function(t){for(var e in t)if(!t[e].reg.test(t[e].value))return Object(i["a"])(t[e].errorMsg),!1;return!0}}]),t}(),l=new c}}]);
//# sourceMappingURL=chunk-d179322c.e81ad587.js.map